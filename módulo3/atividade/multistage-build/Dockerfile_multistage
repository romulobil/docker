# Estágio 1: Builder
FROM golang:1.20.3-alpine3.17 AS builder

WORKDIR /app
COPY . ./
RUN go build -o app main.go

# Estágio 2: Runner
FROM alpine:3.17.1
RUN apk --no-cache add ca-certificates

WORKDIR /root/
COPY --from=builder /app/app ./

ENV MESSAGE "Hello from Docker!"
ENV PORT 8080

EXPOSE 8080
CMD ["./app"]
